<div class = "container-fluid">
  <div class = "row mb-3">
    <div class = "col-12">
      <h2>学習終了</h2>
    </div>
  </div>
  <div class = "row ">
    <div class = "col-6">
      <h3 class = "mb-3">学習ルーム: <%= @room %></h3>
      <h3 class = "mb-3">学習カテゴリ: <%= @study_category %></h3>
      <h3 class = "mb-3">学習テーマ: <%= @study_theme %></h3>
      <h3 class = "mb-3">学習開始時間: <%= @started_at %></h3>
      <h3 class = "mb-3">学習終了時間: <%= @ended_at %></h3>
      <h3 class = "mb-3">学習集中時間: <%= "#{@total_focus_minutes}分" %></h3>
      <%= form_with model: [:Public, @study_record], url: post_public_study_record_path(@study_record), method: :patch do |f| %>
        <%= f.label :record_body, "投稿内容", class: "form-label" %>
        <%= f.text_area :record_body, class: "form-control mb-3", rows: 5 %>
        <%= f.submit "学習内容を投稿する", class: "btn btn-outline-success w-100 mb-3" %>
      <% end %>  
    </div>
    <div class = "col-6">
      <div class = "row mx-auto p-3 border-bottom">
        <div class = "col-3 d-flex justify-content-center">
          <p class = "mb-0">No.</p>
        </div>      
        <div class = "col-3 d-flex justify-content-center">
          <p class = "mb-0">集中開始時刻</p>
        </div>
        <div class = "col-3 d-flex justify-content-center ">
          <p class = "mb-0">集中終了時刻</p>
        </div>
        <div class = "col-3 d-flex justify-content-center ">
          <p class = "mb-0">集中時間</p>
        </div>
      </div>
      <% @study_intervals.each.with_index(1) do |study_interval, i| %>
        <div class = "row mx-auto p-3 border-bottom ">
          <div class = "col-3 d-flex justify-content-center align-items-center">
            <p class = "mb-0"><%= i %></p>
          </div>
          <div class = "col-3 d-flex justify-content-center align-items-center">
            <p class = "mb-0"><%= study_interval.started_at.strftime("%H:%M:%S") %></p>
          </div>
          <div class = "col-3 d-flex justify-content-center align-items-center">
            <p class = "mb-0"><%= study_interval.ended_at.strftime("%H:%M:%S") %></p>
          </div>
          <div class = "col-3 d-flex justify-content-center align-items-center">
            <p class = "mb-0"><%= ((study_interval.ended_at - study_interval.started_at)/60).to_i %>分</p>
          </div>
        </div>
      <% end %> 
    </div>
  </div>
</div>